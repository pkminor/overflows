<app-post-nav></app-post-nav>

<div class="postmain mt-5">

  <app-post-form [categories]='categories'></app-post-form>

  <div class="card  mb-3" *ngFor='let post of posts;let i=index'>

    <div class="card-header">
      <span> <i class="fa fa-user-circle fa-2x mr-2 p-1 shadow-sm bg-white rounded-circle"></i>
        {{post.username}}
      </span>
    </div>

    <div class="card-body">

      <h5 class="card-title">{{post.category}}: {{post.title}} </h5>
      <p class="card-text"></p>

      <div class="mb-2">
        {{post.content}}
      </div>

      <div class="container">

        <app-post-comments [post]='post' *ngIf='post.showComments; else reveal'></app-post-comments>

        <ng-template #reveal>
          <span (click)="showComments(i)" class="badge bg-moringa-alpha-7 text-white p-2">Show comments on this post
            <span class="badge badge-pill bg-moringa p-2 font-weight-bolder">{{post.comments.length}}</span>
          </span>
        </ng-template>

      </div> <!-- End container to display post and comments -->

    </div><!-- End Card Body -->

    <div class="card-footer card-text text-white bg-moringa-alpha-7">
      Posted on {{post.postDate}}
    </div>

  </div>
</div>
